    
</body>
<script>
    var part = 0;
    var formPart = document.getElementsByClassName('menu');
    var highlight = document.getElementsByClassName('highlight');
    var p = document.getElementById('error');
        if(part == 0){
          formPart[0].style.display = 'block'; 
          highlight[0].style.background = 'red'; 
        }
        function onshow(n){
            formPart[n-1].style.display = 'none'
            formPart[n].style.display = 'block';
            highlight[n].style.background = 'red';
            highlight[n-1].style.background = 'white'; 
        }
        function prev(n){
            formPart[n].style.display = 'none'
            formPart[n - 1].style.display = 'block';
            highlight[n - 1].style.background = 'red';
            highlight[n].style.background = 'white'; 
        } 

        function error(i,arr,actualName){
              let p = document.getElementsByClassName('error');
              p[i].innerText = `* please enter ${actualName}`;
              p[i].style.color = 'red';
              arr.focus();
              
            }
            function valid(i,arr,actualName){
              let p = document.getElementsByClassName('error');
              p[i].innerText = `* please enter valid ${actualName}`;
              p[i].style.color = 'red';
              arr.focus();
              
            }
            function select(i,arr,actualName){
              let p = document.getElementsByClassName('error');
              p[i].innerText = `* please select ${actualName}`;
              p[i].style.color = 'red';
              arr.focus();
            }
            function erase(i){
               setTimeout(function(e){
                  let p = document.getElementsByClassName('error');
                  p[i].innerText = '';
                  },5000);
            }
          
            function work_add(){
         var table = document.getElementById('work');
         var tr = document.createElement('tr');
         tr.innerHTML = 
                `<td>Company name</td>
                <td><input type="text" name="cname" class="cname"></td>
                <td>Designation</td>
                <td><input type="text" name="cdes" class="cdes"></td>
                <td>From</td>
                <td><input type="text" name="cfrom" class="cfrom"></td>
                <td>To</td>
                <td><input type="text" name="cto" class="cto"></td>`;
         table.children[0].appendChild(tr);
}
function ref_add(){
         var table = document.getElementById('ref');
         var tr = document.createElement('tr');
         tr.innerHTML = `<td>Name</td>
                <td><input type="text" name="refname" class="refname"></td>
                <td>Contact Number</td>
                <td><input type="text" name="refcon" class="refcon"></td>
                <td>Relation</td>
                <td><input type="text" name="refrel" class="refrel"></td>`;
         table.children[0].appendChild(tr);
}
 async function work_del(){

         let table = document.getElementById('work');
         let tr = await table.lastElementChild.querySelectorAll('tr');
         if(tr.length > 1){
             tr[tr.length - 1].remove();
         }
      }
async function ref_del(){
         let table = document.getElementById('ref');
         let tr = await table.lastElementChild.querySelectorAll('tr');
         if(tr.length > 1){
             tr[tr.length - 1].remove();
         }
   }


        function validation1(){
            var fname = document.getElementById('fname');
            var lname = document.getElementById('lname');
            var email = document.getElementById('email');
            var des = document.getElementById('des');
            var add1 = document.getElementById('add1');
            var add2 = document.getElementById('add2');
            var num = document.getElementById('num');
            var city = document.getElementById('city');
            var dob = document.getElementById('dob');
            var zip = document.getElementById('zip'); 

          const arr = [fname,lname,des,email,num,city,dob,zip];
            for(let i=0;i<arr.length;i++){
               
               const actualName = ['first name','last name','Designation','email','Phone','city','date of birth','zip code'];
               let nre = "^[6-9]{1}[0-9]{9}$";
               let ereg = "^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$"; 
               let date = '[1-9][0-9][0-9]{2}-([0][1-9]|[1][0-2])-([1-2][0-9]|[0][1-9]|[3][0-1])';

              if(arr[i].value == ''){ 
                  error(0,arr[i],actualName[i]);
                  erase(0);
                  return false;
               }
               else if(arr[i] == email && !(email.value.match(ereg))){
                  valid(0,arr[i],actualName[i]);
                  erase(0);
                  return false;
                  
               }
               else if(arr[i] == num && !(num.value.match(nre))){
                  valid(0,arr[i],actualName[i]);
                  erase(0);
                  return false;
               }
               else if(arr[i] == dob && !(dob.value.match(date))){
                  valid(0,arr[i],actualName[i]);
                  erase(0);
                  return false;
               }
               else if(arr[i] == zip && (isNaN(zip.value) || zip.value.length != 6)){
                  valid(0,arr[i],actualName[i]);
                  erase(0);
                  return false;
               }
         }
         if(add1.value == '' && add2.value == ''){ 
               let p = document.getElementsByClassName('error');
                p[0].innerText = `* please enter address`;
                p[0].style.color = 'red';
                add1.focus();
                erase(0);
                return false;
         }
            
            onshow(1);
        }
        
        function validation2(){
         var sscn = document.getElementById('sscn'); 
           var sscy = document.getElementById('sscy'); 
           var sscp = document.getElementById('sscp'); 
           var hscn = document.getElementById('hscn'); 
           var hscy = document.getElementById('hscy'); 
           var hscp = document.getElementById('hscp'); 
           var bdn = document.getElementById('bdn'); 
           var bcourse = document.getElementById('bcourse'); 
           var bdy = document.getElementById('bdy'); 
           var bdp = document.getElementById('bdp'); 
           var mdn = document.getElementById('mdn');
           var mcourse = document.getElementById('mcourse');
           var mdy = document.getElementById('mdy');
           var mdp = document.getElementById('mdp');
     
           var education = [sscn,sscy,sscp,hscn,hscy,hscp,bdn,bcourse,bdy,bdp];
      
      for(var i = 0;i < education.length;i++){
            console.log(sscy.value.length);
            let eduName = ['ssc board','ssc year','ssc percentage','hsc board','hsc year','hsc percentage','bachelor board','bachelor course','bachelor year','bachelor percentage'];
            if(education[i].value == ''){ 
               error(1,education[i],eduName[i]);
               erase(1);
               return false;
            }
            else if((education[i] == sscy) & ( isNaN(sscy.value) ||  sscy.value.length != 4)){
               valid(1,education[i],eduName[i]);
               erase(1);
               return false;
            }
            else if((education[i] == hscy) & (isNaN(hscy.value) || hscy.value.length != 4)){
               valid(1,education[i],eduName[i]);
               erase(1);
               return false;
            }
            else if((education[i] == bdy) & (isNaN(bdy.value) || bdy.value.length != 4)){
               valid(1,education[i],eduName[i]);
               erase(1);
               return false;
            }
            else if((education[i] == sscp) & (isNaN(sscp.value) ||  sscp.value.length > 2)){
               valid(1,education[i],eduName[i]);
               erase(1);
               return false;
            }
            else if((education[i] == hscp) & (isNaN(hscp.value) || hscp.value.length > 2)){
               valid(1,education[i],eduName[i]);
               erase(1);
               return false;
            }
            else if((education[i] == bdp) & (isNaN(bdp.value) || bdp.value.length > 2)){
               valid(1,education[i],eduName[i]);
               erase(1);
               return false;
            }
      }

      if(mdn.value != '' || mcourse.value != '' || mdy.value != '' || mdp.value != ''){
               
               let arr = [mdn,mcourse,mdy,mdp];
               for(var i=0;i<arr.length;i++){
                  let univerName = ['University of Master','Course Name of Master','Passing Year of master','Percantage of master'];
                  if(arr[i].value == ''){
                     error(1,arr[i],univerName[i]);
                     erase(1);
                     return false;
                  }
                  else if((arr[i] == mdy) && (isNaN(mdy.value) || mdy.value.length > 4)){
                     valid(1,arr[i],univerName[i]);
                     erase(1);
                     return false;
                  }
                  else if((arr[i] == mdp) && (isNaN(mdp.value) || mdp.value.length > 2)){
                     valid(1,arr[i],univerName[i]);
                     erase(1);
                     return false;
                  }
               }
      }

            onshow(2);
        }
        
        function validation3(){
         var cname = document.getElementsByClassName('cname');
           var cdes = document.getElementsByClassName('cdes');
           var cfrom = document.getElementsByClassName('cfrom');
           var cto = document.getElementsByClassName('cto');

           const table = document.getElementById('work');
          const tr = table.rows.length;
          console.log(tr);
          for(var i=0;i<tr;i++){
             
             if(cname[i].value != '' || cdes[i].value != '' || cfrom[i].value != '' || cto[i].value != '' ){
                  
                     let date = '[1-9][0-9][0-9]{2}-([0][1-9]|[1][0-2])-([1-2][0-9]|[0][1-9]|[3][0-1])';
                     if(cname[i].value == ''){
                       error(2,cname[i],'company name');
                       erase(2);
                       return false;
                     }
                     else if(cdes[i].value == ''){
                       error(2,cdes[i],'company desgination');
                       erase(2);
                       return false;
                     }
                     else if(cfrom[i].value == ''){
                        error(2,cfrom[i],'company date from');
                        erase(2);
                       return false;
                     }
                     else if(!(cfrom[i].value.match(date))){
                       valid(2,cfrom[i],'company date from');
                       erase(2);
                        return false;
                     }
                     else if(cto[i].value == ''){
                        error(2,cto[i],'company date to');
                        erase(2);
                        return false;
                     }
                     else if(!(cto[i].value.match(date))){
                       valid(2,cto[i],'company date to');
                       erase(2);
                       return false;
                     }

            }
          }
            onshow(3);
        }
        
        function validation4(){
         var hindi = document.getElementById('hindi');
           var guj = document.getElementById('guj');
           var eng = document.getElementById('eng');
           var hread = document.getElementById('hread');
           var eread = document.getElementById('eread');
           var gread = document.getElementById('gread');
           var hwrite = document.getElementById('hwrite');
           var ewrite = document.getElementById('ewrite');
           var gwrite = document.getElementById('gwrite');
           var hspeak = document.getElementById('hspeak');
           var espeak = document.getElementById('espeak');
           var gspeak = document.getElementById('gspeak');

           if(hindi.checked != true && eng.checked != true && guj.checked != true){
                  select(3,hindi,'any language that you know');
                  erase(3);
                  return false;
         }
          
         let lang = [hindi,guj,eng];
         for(let i = 0;i<lang.length;i++){
            let language= ['hindi','gujarati','english'];
            let level = [[hread,hwrite,hspeak],[gread,gwrite,gspeak],[eread,ewrite,espeak]];
            console.log(level[i][0],lang[i]);
             if(lang[i].checked == true){
                if(level[i][0].checked == false &&  level[i][1].checked == false && level[i][2].checked == false){
                      select(3,lang[i],`language know type for ${language[i]}`);
                      erase(3);
                      return false;
                   }
             }
         }
            for(let i = 0;i<lang.length;i++){
               let language= ['hindi','gujarati','english'];
               let level = [[hread,hwrite,hspeak],[gread,gwrite,gspeak],[eread,ewrite,espeak]];
   
               if(level[i][0].checked == true  ||  level[i][1].checked == true || level[i][2].checked == true){
                  if(lang[i].checked == false){
                     lang[i].checked = true;
                   }
             }
            }
         onshow(4);
        }
      
        function validation5(){
         var php = document.getElementById('php');
           var rphp = document.getElementsByClassName('rphp');
           var oracle = document.getElementById('oracle');
           var roracle = document.getElementsByClassName('roracle');
           var mysql = document.getElementById('mysql');
           var rmysql = document.getElementsByClassName('rmysql');
           var larvel = document.getElementById('larvel');
           var rlarvel = document.getElementsByClassName('rlarvel');

           let tech = [php,mysql,larvel,oracle];
         for(var i=0;i<4;i++){
            let radio = [rphp,rmysql,rlarvel,roracle];
            if(tech[i].checked == true){
               
               console.log(radio[i][0],radio[i][1],radio[i][2].checked);
               if(radio[i][0].checked == false && radio[i][1].checked == false && radio[i][2].checked == false) {   
                     select(4,tech[i],` level of technologie for ${tech[i].value}`);
                     erase(4);
                     return false;
                  }
            }
            else if(radio[i][0].checked == true || radio[i][1].checked == true || radio[i][2].checked == true){
               if(tech[i].checked == false){
                  tech[i].checked = true;
               }
            }
         }
         onshow(5);
        }
        
        function validation6(){
         var refname = document.getElementsByClassName('refname');
         var refcon = document.getElementsByClassName('refcon');
         var refrel = document.getElementsByClassName('refrel');
   
         const table1 = document.getElementById('ref');
         const tr1 = table1.rows.length;
          for(var i=0;i<tr1;i++){
             
             if(refname[i].value != '' || refcon[i].value != '' || refrel[i].value != ''){
                  
                     
                      let nre = "^[6-9]{1}[0-9]{9}$";

                      if(refname[i].value == ''){
                       error(5,refname[i],'reference name');
                       erase(5);
                       return false;
                     }
                     else if(refcon[i].value == ''){
                       error(5,refcon[i],'reference contact');
                       erase(5);
                       return false;
                     }
                     else if(!(refcon[i].value.match(nre))){
                       valid(5,refcon[i],'reference contact');
                       erase(5);
                        return false;
                     }
                     else if(refrel[i].value == ''){
                        error(5,refrel[i],'reference relation');
                        erase(5);
                       return false;
                     }
              

                  }
          }
            onshow(6);
        }
        
   
        document.getElementById('submit').addEventListener('click',async (e)=>{
     
           e.preventDefault();
           var notice = document.getElementById('notice');
           var ctc = document.getElementById('ctc');
           var ectc = document.getElementById('ectc');
            let preferance = [notice,ectc,cctc];
            let prefeName = ['notice period','expected ctc','current ctc'];
            for(var i=0;i<preferance.length;i++){
               if(preferance[i].value == ''){
                  error(6,preferance[i],`${prefeName[i]}`);
                  erase(6);
                  return false;
               }
               else if(isNaN(preferance[i].value)){
                  valid(6,refcon[i],`${prefeName[i]}`);
                  erase(5);
                  return false;
               }
           }
            if(window.location.pathname == '/partForm'){

            
               let form = document.getElementById('form2');
               const data = new URLSearchParams(new FormData(form));
               let bodyData = await fetch('http://localhost:3000/partForm/form',{
                  method:"POST",
                  headers: {
                     'Content-Type': ' application/x-www-form-urlencoded'
                  },
                  body: data
               });
               var result = await bodyData.json();
               alert(`${result.alert}`);
              
            }
            
            if(window.location.pathname == '/partForm/update'){
               let form = document.getElementById('form2');
               const data = new URLSearchParams(new FormData(form));
               var Id = window.location.href.split('?id=')[1];
               let bodyData = await fetch('http://localhost:3000/partForm/update/form',{
                  method:"POST",
                  headers: {
                     'Content-Type': ' application/x-www-form-urlencoded',
                     'userId' : `${Id}` 
                  },
                  body: data,
                  
               });
               var result = await bodyData.json();
               alert(result.alert);
               window.location.pathname = '/partForm'   
            } 
           
         })
   // update

if(window.location.pathname == '/partForm/update'){
               update();
}
async function update(){
   
      let bodyData = await fetch(window.location.href,{
         method:"POST",
         headers: {
            'Content-Type': ' application/json'
         },
      });
      var result = await bodyData.json();
       document.getElementById('hidden').value = window.location.href.split('?id=')[1];
       document.getElementById('fname').value = result.res1[0].fname;
       document.getElementById('lname').value = result.res1[0].lname;
       document.getElementById('email').value = result.res1[0].email;
       document.getElementById('des').value = result.res1[0].designation;
       document.getElementById('add1').value = result.res1[0].address;
       document.getElementById('num').value = result.res1[0].mobile;
       document.getElementById('city').value = result.res1[0].city;
       document.getElementById('dob').value = result.res1[0].dob;
       document.getElementById('zip').value = result.res1[0].zipcode; 
       document.getElementById('sscn').value = result.res2[0].board;
       document.getElementById('sscy').value = result.res2[0].year;
       document.getElementById('sscp').value = result.res2[0].percentage;
       document.getElementById('hscn').value = result.res2[1].board; 
       document.getElementById('hscy').value = result.res2[1].year; 
       document.getElementById('hscp').value = result.res2[1].percentage;
       document.getElementById('bdn').value = result.res2[2].board; 
       document.getElementById('bcourse').value = result.res2[2].courseName;
       document.getElementById('bdy').value = result.res2[2].year;
       document.getElementById('bdp').value = result.res2[2].percentage;

       if(result.res2[3] != undefined){
         document.getElementById('mdn').value = result.res2[3].board; 
         document.getElementById('mcourse').value = result.res2[3].courseName;
         document.getElementById('mdy').value = result.res2[3].year;
         document.getElementById('mdp').value = result.res2[3].percentage;
       }
       
      result.res3.forEach((element,index)=> {
         document.getElementById('cname').value = result.res3[index].cname;
         document.getElementById('cdes').value = result.res3[index].designation;
         document.getElementById('cfrom').value = result.res3[index].fromW;
         document.getElementById('cto').value = result.res3[index].toW;         
      });

           var hindi = document.getElementById('hindi');
           var guj = document.getElementById('guj');
           var eng = document.getElementById('eng');
           var hread = document.getElementById('hread');
           var eread = document.getElementById('eread');
           var gread = document.getElementById('gread');
           var hwrite = document.getElementById('hwrite');
           var ewrite = document.getElementById('ewrite');
           var gwrite = document.getElementById('gwrite');
           var hspeak = document.getElementById('hspeak');
           var espeak = document.getElementById('espeak');
           var gspeak = document.getElementById('gspeak');
           
         result.res4.forEach( (element,index) =>{

            if(result.res4[index].language == 'hindi'){
               hindi.checked = true;
               if(result.res4[index].lread == 'y'){
                  hread.checked = true;
               }
               if(result.res4[index].lwrite == 'y'){
                  hwrite.checked = true;
               }
               if(result.res4[index].speak == 'y'){
                  hspeak.checked = true;
               }
               
            }
            if(result.res4[index].language == 'english'){
               eng.checked = true;
               if(result.res4[index].lread == 'y'){
                  eread.checked = true;
               }
               if(result.res4[index].lwrite == 'y'){
                  ewrite.checked = true;
               }
               if(result.res4[index].speak == 'y'){
                  espeak.checked = true;
               }
            }
            if(result.res4[index].language == 'gujarati'){
               guj.checked = true;
               if(result.res4[index].lread == 'y'){
                  gread.checked = true;
               }
               if(result.res4[index].lwrite == 'y'){
                  gwrite.checked = true;
               }
               if(result.res4[index].speak == 'y'){
                  gspeak.checked = true;
               }
            }
         });

           var php = document.getElementById('php');
           var lphp = document.getElementsByClassName('lphp');
           var oracle = document.getElementById('oracle');
           var loracle = document.getElementsByClassName('loracle');
           var mysql = document.getElementById('mysql');
           var lmysql = document.getElementsByClassName('lmysql');
           var larvel = document.getElementById('larvel');
           var llarvel = document.getElementsByClassName('llarvel');
   

           result.res5.forEach((element,index)=>{
               if(result.res5[index].technologies == 'php'){
                  php.checked = true;
                  if(result.res5[index].level == 'Beginer'){
                     lphp[0].checked = true;
                  }
                  if(result.res5[index].level == 'Mediater'){
                     lphp[1].checked = true;
                  }
                  if(result.res5[index].level == 'Expert'){
                     lphp[2].checked = true;
                  }
               } 

               if(result.res5[index].technologies == 'mysql'){
                  mysql.checked = true;
                  if(result.res5[index].level == 'Beginer'){
                     lmysql[0].checked = true;
                  }
                  if(result.res5[index].level == 'Mediater'){
                     lmysql[1].checked = true;
                  }
                  if(result.res5[index].level == 'Expert'){
                     lmysql[2].checked = true;
                  }
               } 

               if(result.res5[index].technologies == 'oracle'){
                  oracle.checked = true;
                  if(result.res5[index].level == 'Beginer'){
                     loracle[0].checked = true;
                  }
                  if(result.res5[index].level == 'Mediater'){
                     loracle[1].checked = true;
                  }
                  if(result.res5[index].level == 'Expert'){
                     loracle[2].checked = true;
                  }
               } 

               if(result.res5[index].technologies == 'laravel'){
                  larvel.checked = true;
                  if(result.res5[index].level == 'Beginer'){
                     llarvel[0].checked = true;
                  }
                  if(result.res5[index].level == 'Mediater'){
                     llarvel[1].checked = true;
                  }
                  if(result.res5[index].level == 'Expert'){
                     llarvel[2].checked = true;
                  }
               } 
           });

           result.res6.forEach((element,index) => {
              document.getElementById('refname').value = result.res6[index].name;
              document.getElementById('refcon').value = result.res6[index].contact;
              document.getElementById('refrel').value = result.res6[index].relationship;
            });

            document.getElementById('notice').value = result.res7[0].notice;
            document.getElementById('cctc').value = result.res7[0].cctc;
            document.getElementById('ectc').value = result.res7[0].ectc;
            document.getElementById('dept').value = result.res7[0].department;
            document.getElementById('loc').value = result.res7[0].location;
   }
  
      </script>
</html>