<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data</title>
    <style>
        table td{
          width: 100px;
          height: 100px;
          
        }
    </style>
</head>
<body>
         <input type="text" id="search">
         <input type="button" value="Go" onclick="find()">
         <input type="button" onclick="rel()" value="remove search">
            <table id="table" border="1" align="center">
                <tr>

                    <th>id</th>
                    <th>slug</th>
                    <th>title</th>
                    <th>image</th>
                    <th>thumbnail</th>
                    <th>status</th>
                    <th>category</th>
                    <th>publishedAt</th>
                    <th>Details</th>
             </tr>
            </table>
            <input type="button" name="first" id="first" onclick="first()" value="<<">
            <input type="button" name="prev" id="prev" onclick="prev()" value="<">
            <input type="text" name="page" id="page" value="1" disabled>
            <input type="button" name="next" id="next" onclick="next()" value=">">
            <input type="button" name="last" id="last" onclick="last()" value=">>">
</body>
<script>
    function rel(){
        window.location.reload()
    }
    let data;

    async function onetime(){
        data = await fetchData();
        readData(data,0,10);
    }
    function find(){
        search = document.getElementById('search').value;
        document.getElementById('page').value = 1;
       let searchArr = data.filter(items =>{
          return Object.values(items).join(" ").includes(search);
       });  
       data = searchArr;
       readData(data,0,10);
    }
        
        async function fetchData(){
            try{
                const response = await fetch('https://jsonplaceholder.org/posts');
                const data = await response.json();
                console.log(data);
                return data;
            }
            catch(e){
                console.error(e);
            }
        }
        async function readData(data,start,end){
            if(!data){
                return;
            }
            var page  = document.getElementById('page').value;
            len = (data.length)/ 10;
            len = len -1;
         
                document.getElementById('first').style.pointerEvents = 'auto';
                document.getElementById('prev').style.pointerEvents = 'auto';
                document.getElementById('next').style.pointerEvents = 'auto';
                document.getElementById('last').style.pointerEvents = 'auto';
            if(page == 1){
                document.getElementById('first').style.pointerEvents = 'none';
                document.getElementById('prev').style.pointerEvents = 'none';
                document.getElementById('page').value = 1;
            }
            if(page == len){
                document.getElementById('next').style.pointerEvents = 'none';
                document.getElementById('last').style.pointerEvents = 'none';
            }
                const table = document.getElementById('table');
                table.innerHTML = '';
                let arr = data.slice(start,end);
                arr.forEach((element,index )=> {
                         
                        var tr = document.createElement('tr');
                        tr.innerHTML = `<td>${element.id}</td>
                        <td>${element.slug}</td>
                        <td>${element.title}</td>
                        <td><img src="${element.thumbnail}" alt=""></td>
                        <td>${element.status}</td>
                        <td>${element.category}</td>
                        <td>${element.category}</td>
                        <td>${element.publishedAt}</td>
                        <td><a href="/view/${element.id}" target="_blank">View More</a></td>`;
                        table.appendChild(tr);
                });
            }
       
        function first(){
            readData(data,0,10); 
            document.getElementById('page').value = 1;
        }
        function next(){
            var page = document.getElementById('page').value;
            start = page*10;
            end = start + 10;
            page++;
            document.getElementById('page').value = page;
            readData(data,start,end);
        }
        function prev(){
            var page = document.getElementById('page').value;
            page--;
            end = page*10;
            start = end - 10;
            document.getElementById('page').value = page;
            readData(data,start,end);
        }
        function last(){
            let end = data.length; 
            let start = end - 10;
            document.getElementById('page').value = (data.length)/10;
            readData(data,start,end); 
        }
        onetime();
        
</script>
</html>