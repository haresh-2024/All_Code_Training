<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Data</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body{
            background-color: rgb(235, 233, 221);
        }
        table{
            border-collapse: collapse;
            font-size: 0.6rem;
        }
        table tr td,th{
            padding: 10px;
        }
        td a{
            text-decoration: none;
            background-color: orange;
            border: 2px solid black;
            padding: 5px;
            color: black;
        }
        .home{
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
        }
        a{
            text-decoration: none;
            background-color: orange;
            border: 2px solid black;
            padding: 5px;
            color: black;
        }
        .btn{
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 50px;
            gap: 20px;
        }
        .btn input{
            text-decoration: none;
            background-color: orange;
            border: 2px solid black;
            padding: 5px;
            color: black;
            text-align: center;
            width: 30px;
        }
        #form1{
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: -10px;
        }
        #form2{
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
            margin-bottom: 3px;
        }
        </style>
</head>
<body onload="change()">
    <h1 align="center">Student Details</h1>

     <form action="/page" id="form2">
        <input type="submit" value="Clear Filter">
        <input type="hidden" value="<%= order %>"" id="hidden">
     </form>
     <table border="1" align="center">
        <tr>
            <th onclick="touch('id',1)"><i class="fa-solid fa-down-long" id="1d"></i><i class="fa-solid fa-up-long" id="1u"></i>Id</th>
            <th onclick="touch('f_name',2)"><i class="fa-solid fa-down-long" id="2d"></i><i class="fa-solid fa-up-long" id="2u" ></i>First Name</th>
            <th onclick="touch('m_name',3)"><i class="fa-solid fa-down-long" id="3d"></i><i class="fa-solid fa-up-long" id="3u" ></i>Middle Name</th>
            <th onclick="touch('l_name',4)"><i class="fa-solid fa-down-long" id="4d"></i><i class="fa-solid fa-up-long" id="4u" ></i>Last name</th>
            <th onclick="touch('email',5)"><i class="fa-solid fa-down-long" id="5d" ></i><i class="fa-solid fa-up-long" id="5u" ></i>Email</th>
            <th onclick="touch('gender',6)"><i class="fa-solid fa-down-long" id="6d" ></i><i class="fa-solid fa-up-long" id="6u"></i>Gender</th>
            <th onclick="touch('dob',7)"><i class="fa-solid fa-down-long" id="7d" ></i><i class="fa-solid fa-up-long" id="7u" ></i>dob</th>
            <th onclick="touch('No',8)"><i class="fa-solid fa-down-long" id="8d" ></i><i class="fa-solid fa-up-long" id="8u" ></i>Number</th>
            <th onclick="touch('city',9)"><i class="fa-solid fa-down-long" id="9d" ></i><i class="fa-solid fa-up-long" id="9u" ></i>City</th>
            <th onclick="touch('Address',10)"><i class="fa-solid fa-down-long" id="10d" ></i><i class="fa-solid fa-up-long" id="10u" ></i>Address</th>
            <th onclick="touch('zipcode',11)"><i class="fa-solid fa-down-long" id="11d" ></i><i class="fa-solid fa-up-long" id="11u" ></i>zipcode</th>
            <th onclick="touch('B_group',12)"><i class="fa-solid fa-down-long" id="12d" ></i><i class="fa-solid fa-up-long" id="12u" ></i>Blood Group</th>
            <th onclick="touch('Created_at',13)"><i class="fa-solid fa-down-long" id="13d" ></i><i class="fa-solid fa-up-long" id="13u" ></i>Created_at</th>
        </tr>
      
        <% result.forEach( (row) => { %>
          <tr>
            <td><%= row.id%></td>
            <td><%= row.f_name %></td>
            <td><%= row.m_name %></td>
            <td><%= row.l_name %></td>
            <td><%= row.email%></td>
            <td><%= row.gender%></td>
            <td><%= row.dob %></td>
            <td><%= row.No %></td>
            <td><%= row.city%></td>
            <td><%= row.Address%></td>
            <td><%= row.zipcode%></td>
            <td><%= row.B_group %></td>
            <td><%= row.Created_at%></td>
          </tr>    
        <% }) %>
      </table>

      <div class="btn">
          <div>
              <h3>Showing <%= first  %> to <%= last %> of 50000 entries</h3>
          </div>
        <a href="/order/<%= cols %>/<%= order %>" onclick="first()" id="first"><<</a>
        <a href="/oprev/<%= i %>/<%= cols %>/<%= order %>" onclick="prev()" id="prev"><</a>
        <input type="text" value="<%= i %>" id="page" disabled>
        <a href="/onext/<%= i %>/<%= cols %>/<%= order %>" onclick="next()" id="next">></a>
        <a href="/olast/<%= cols %>/<%= order %>" onclick="last()" id="last">>></a>
      </div>
       
    </body>
    <script>
        
        var page = document.getElementById('page');
        if(page.value == 1){
            document.getElementById('first').style.pointerEvents = 'none';
            document.getElementById('prev').style.pointerEvents = 'none';
        }
        else if(page.value == 5000){
            document.getElementById('last').style.pointerEvents = 'none';
            document.getElementById('next').style.pointerEvents = 'none';
        }
        function url(){
                 if(page.value < 1){
                      document.getElementById('page').value = 1;
                 }
                 else if(page.value > 5000){
                    document.getElementById('page').value = 5000;
                 }
                 window.location.href =`/rows/${page.value}`;
        }

        function change(){
            var id = window.sessionStorage.getItem('change');
            document.getElementById(id).style.color = 'red';
        }
        function touch(e,n){
            var time = window.sessionStorage.getItem('time');
            if(time == `${e}1`){
                window.sessionStorage.setItem('change',`${n}d`);
                window.sessionStorage.setItem('time',`${e}0`);
                window.location.href = `/order/${e}/desc`;
            }
            else{
                window.sessionStorage.setItem('change',`${n}u`);
                window.sessionStorage.setItem('time',`${e}1`);
                window.location.href = `/order/${e}/asc`;
            }
        }
    </script>
</html>